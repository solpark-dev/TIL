# 2025-08-05-TIL: 웹 아키텍처 - 모델 1 분석과 모델 2 핵심 개념 정복

## 🏷️ Tags

`Java` `JSP` `Servlet` `Model1` `Model2` `MVC` `Architecture` `Forward` `Redirect`

## 📚 오늘 배운 내용

오늘은 웹 애플리케이션의 기본 아키텍처인 모델 1을 분석하여 그 특징과 한계를 이해하고, 이를 개선한 모델 2(MVC) 패턴의 핵심 개념을 학습했다.

---

### Part 1: 모델 1(Model 1) 아키텍처 분석

모델 1은 JSP 페이지가 사용자의 요청을 직접 받아 **컨트롤러(Controller)**와 **뷰(View)**의 역할을 모두 처리하는 구조이다.

#### ① 모델 1 기반 로그인 기능 흐름

-   **`logon.jsp` (View + Controller)**: 로그인 폼을 제공하고, 이미 로그인된 사용자인지 체크.
-   **`logonAction.jsp` (Controller)**: `logon.jsp`에서 받은 데이터로 실제 로그인 로직을 처리하고 결과를 포워딩.
-   **`UserDao` (Model)**: 비즈니스 로직(이번 예제에서는 Mock 인증)을 수행.
-   **`UserVO` (Model)**: 계층 간 데이터 전달을 담당.
-   **`home.jsp` (View + Controller)**: 로그인 성공 시 보여줄 화면. 비로그인 사용자의 접근을 차단.

#### ② 모델 1 아키텍처의 한계점

모델 1은 구조가 단순하지만, 규모가 커질수록 다음과 같은 명확한 한계점을 가진다.

1.  **관심사의 미분리 (Separation of Concerns)**
    -   하나의 JSP 파일 안에 화면을 그리는 HTML 코드와 로직을 처리하는 Java 코드(스크립틀릿 `<%%>`)가 섞여 있어 코드가 매우 복잡해진다.
2.  **낮은 재사용성과 유지보수성**
    -   로직이 특정 JSP 페이지에 강하게 결합되어 있어 재사용이 어렵고, 작은 변경이 다른 부분에 영향을 미치기 쉬워 유지보수가 힘들다.
3.  **분업의 어려움**
    -   웹 디자이너(HTML, CSS)와 서버 개발자(Java)가 같은 파일을 수정해야 하므로 협업 효율이 크게 떨어진다.

---

### Part 2: 모델 2(MVC) 핵심 개념

모델 1의 한계를 극복하기 위해 등장한 모델 2(MVC) 아키텍처의 핵심 구성요소인 서블릿(Servlet)과 페이지 이동 방식의 차이점을 학습했다.

#### ① Forward vs. SendRedirect

| 구분             | **Forward** | **SendRedirect** |
| ---------------- | ---------------------------------------------------------------------------- | -------------------------------------------------------------------------------- |
| **개념** | 서버 내에서 다른 자원으로 제어를 **위임(Delegate)** | 클라이언트(브라우저)에게 특정 URL로 **재요청(Redirect)**하라고 명령                |
| **URL 주소** | 변경되지 않음 (서버 내부 이동)                                               | 변경됨 (클라이언트가 새로 요청)                                                  |
| **Request 객체** | **공유됨** | **소멸됨** (새로운 요청이므로)                                                   |
| **데이터 전달** | `request` Scope 사용 가능                                                    | `request` Scope 사용 불가. `session`을 이용하거나 URL에 쿼리 스트링을 사용.      |
| **주요 용도** | MVC 패턴에서 Controller가 로직 처리 후 View(JSP)를 호출할 때                   | 작업 완료 후 결과 페이지로 이동할 때 (새로고침 시 재작업 방지. 예: 글쓰기 후 목록으로) |

#### ② 데이터 공유 범위 (Object Scope)

서블릿과 JSP는 내장 객체를 통해 데이터를 공유하며, 각 객체는 서로 다른 생명주기를 가진다.

| Scope         | **생명 주기** | **특징** |
| ------------- | ------------------------------------------------------- | -------------------------------------------------------------- |
| **Request** | 하나의 HTTP 요청이 시작되고 끝날 때까지 (요청 ~ 응답)   | `Forward` 방식에서는 공유되지만, `Redirect`에서는 유실됨.        |
| **Session** | 클라이언트(브라우저)가 서버에 처음 접속해서 닫을 때까지 | 로그인 정보 등 특정 사용자와 관련된 정보를 유지하는 데 사용.     |
| **Application** | 웹 애플리케이션(서버)이 시작되고 종료될 때까지          | 모든 사용자가 공유해야 하는 정보(예: 전체 방문자 수)에 사용. |

---

### 🧐 용어 및 개념 정리

#### ① 로그아웃 처리 방법

| 방법                         | **설명** | **주요 사용 사례** |
| ---------------------------- | ---------------------------------------------------------------------------- | -------------------------------------------------------------------------- |
| **`session.invalidate()`** | 세션 자체를 무효화하여 저장된 모든 데이터를 삭제.                            | 가장 일반적이고 확실한 로그아웃 방법.                                      |
| **`session.removeAttribute()`** | 세션은 유지하되, 특정 속성(예: 로그인 정보)만 제거.                          | 로그인 정보 외에 장바구니 등 다른 세션 정보를 유지해야 할 때.                |
| **`VO`의 상태 변경** | 세션 데이터는 유지한 채, 객체의 상태 플래그(예: `isActive=false`)만 변경. | 특수한 경우, 사용자의 마지막 상태를 추적해야 할 때 사용될 수 있음.         |

#### ② 객체 관련 용어

-   **VO (Value Object)**: 값 그 자체를 표현하는 객체. 주로 `read-only` 특징을 가지며, 객체의 모든 필드 값을 비교하여 동등성을 판단한다.
-   **DTO (Data Transfer Object)**: 계층 간(Controller, Service, View 등) 데이터 전송을 위해 사용하는 객체. 로직을 가지지 않는 순수한 데이터 컨테이너이다.
-   **도메인 객체 (Domain Object)**: 비즈니스 도메인의 핵심 개념(예: 사용자, 주문)을 표현하는 객체. 데이터와 관련 비즈니스 로직을 함께 가질 수 있다.
-   **POJO (Plain Old Java Object)**: 특정 기술이나 프레임워크에 종속되지 않은 '평범한 옛날 자바 객체'를 의미하는 포괄적인 용어. VO, DTO, Domain Object 모두 POJO에 속할 수 있다.
